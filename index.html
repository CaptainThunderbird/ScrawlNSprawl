<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scrawl & Sprawl</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Top Bar -->
  <div id="topbar">
    <div class="topbar-left">
      <div class="brand">
        <!-- you can change logo path later -->
        <div class="brand-logo">ğŸŒ¸</div>
        <div class="brand-text">
          <div class="brand-name">ğŸŒ¸ Scrawl & Sprawl</div>
          <div class="brand-tagline">turn doomscrolling into bloomscrolling</div>
        </div>
      </div>
    </div>

    <div class="topbar-center">
      <div class="pill">Kindness Map</div>
    </div>

    <div class="topbar-right">
      <button class="topbar-btn" type="button">+ Add Vibe</button>
      <button class="topbar-btn ghost" type="button">Bloom Feed</button>
      <button class="topbar-icon" type="button">âš™ï¸</button>
    </div>
  </div>

  <!-- Map -->
  <div id="map" style="height: 100vh; width: 100%;"></div>


  <!-- Modal -->
  <div id="modal" class="hidden">
    <div class="modal-content">
      <h3>New Note</h3>
      <input id="username" placeholder="Name (optional)" />
      <textarea id="note-text" placeholder="Write a kind note..."></textarea>
      <select id="sticker-select">
        <option value="">No sticker</option>
        <option value="heart.svg">Heart</option>
        <option value="star.svg">Star</option>
      </select>
      <button id="save-note">Save</button>
      <button id="cancel-note">Cancel</button>
    </div>
  </div>

  <ul id="recent-notes"></ul>

  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      onSnapshot,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDaIhADuSB359aD6MThCPqwNQieseJ9-4c",
      authDomain: "scrawl-and-sprawl.firebaseapp.com",
      projectId: "scrawl-and-sprawl",
      storageBucket: "scrawl-and-sprawl.firebasestorage.app",
      messagingSenderId: "326407925260",
      appId: "1:326407925260:web:90c3eed500fd57250e8829"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const postsRef = collection(db, "posts");

    window.savePost = async (post) => {
      await addDoc(postsRef, { ...post, createdAt: serverTimestamp() });
    };

    window.listenPosts = (onPost) => {
      return onSnapshot(postsRef, (snapshot) => {
        snapshot.docChanges().forEach((change) => {
          if (change.type === "added") {
            onPost({ id: change.doc.id, ...change.doc.data() });
          }
        });
      });
    };
  </script>

  <script src="app.js" defer></script>
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmaWy-IsFFqQzIlh5dX0H6IHGM5dWLk5A&callback=initMap"
    defer
  ></script>
</body>
</html>


