<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Scrawl & Sprawl</title>
  <link href="https://fonts.googleapis.com/css2?family=Patrick+Hand&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="style.css" />
</head>
<body>

  <!-- Top Bar -->
  <div id="topbar">
    <div class="topbar-left">
      <div class="brand">
        <!-- you can change logo path later -->
        <img class="brand-logo" src="assets/icons/logo.png" alt="Scrawl & Sprawl logo">
        <div class="brand-text">
          <div class="brand-name">üå∏ Scrawl & Sprawl</div>
          <div class="brand-tagline">turn doomscrolling into bloomscrolling</div>
        </div>
      </div>
    </div>

    <div class="topbar-center">
      <div id="location-pill" class="pill">Kindness Map</div>
    </div>

    <div class="topbar-right">
      <button class="topbar-btn" type="button">+ Add Vibe</button>
      <button id="bookmarks-btn" class="topbar-btn ghost" type="button">Bookmarks</button>
      <button class="topbar-icon" type="button">‚öôÔ∏è</button>
    </div>
  </div>

  <!-- Sidebar -->
  <aside id="sidebar">
    <h1>Scrawl & Sprawl</h1>
    <p>Leave a kind note, sticker, or doodle near your location.</p>

    <h2>Mode</h2>
    <div class="mode-row">
      <button type="button" data-mode="note">Note</button>
      <button type="button" data-mode="sticker">Sticker</button>
      <button type="button" data-mode="doodle">Doodle</button>
      <button type="button" data-mode="photo">Photo</button>
    </div>

    <h2>Note Settings</h2>
    <label>
      Color
      <input id="note-color" type="color" value="#C1EDB9" />
    </label>
    <label>
      Post as anonymous
      <input id="anonymous-toggle" type="checkbox" checked />
    </label>
    <label>
      Duration
      <select id="duration-days">
        <option value="1">1 day</option>
        <option value="2">2 days</option>
        <option value="3">3 days</option>
        <option value="4">4 days</option>
        <option value="5">5 days</option>
        <option value="6">6 days</option>
        <option value="7">7 days</option>
      </select>
    </label>

    <h2>Sticker Tray</h2>
    <div id="sticker-tray">
      <button type="button" data-sticker="heart.svg" aria-label="Heart sticker">
        <img src="assets/stickers/heart.svg" alt="" />
      </button>
      <button type="button" data-sticker="smile.svg" aria-label="Smile sticker">
        <img src="assets/stickers/smile.svg" alt="" />
      </button>
      <button type="button" data-sticker="sparkle.svg" aria-label="Sparkle sticker">
        <img src="assets/stickers/sparkle.svg" alt="" />
      </button>
    </div>

    <h2>Recent Notes</h2>
    <ul id="recent-notes"></ul>
  </aside>

  <!-- Map -->
  <div id="map" style="height: 100vh; width: 100%;"></div>


  <!-- Modal -->
  <div id="modal" class="hidden">
    <div class="modal-content">
      <h3>New Note</h3>
      <input id="username" placeholder="Name (optional)" />
      <textarea id="note-text" placeholder="Write a kind note..."></textarea>
      <select id="sticker-select">
        <option value="">No sticker</option>
        <option value="heart.svg">Heart</option>
        <option value="smile.svg">Smile</option>
        <option value="sparkle.svg">Sparkle</option>
      </select>
      <button id="save-note">Save</button>
      <button id="cancel-note">Cancel</button>
    </div>
  </div>


  <!-- Firebase -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-app.js";
    import {
      getFirestore,
      collection,
      addDoc,
      onSnapshot,
      serverTimestamp
    } from "https://www.gstatic.com/firebasejs/10.12.4/firebase-firestore.js";

    const firebaseConfig = {
      apiKey: "AIzaSyDaIhADuSB359aD6MThCPqwNQieseJ9-4c",
      authDomain: "scrawl-and-sprawl.firebaseapp.com",
      projectId: "scrawl-and-sprawl",
      storageBucket: "scrawl-and-sprawl.firebasestorage.app",
      messagingSenderId: "326407925260",
      appId: "1:326407925260:web:90c3eed500fd57250e8829"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app);
    const postsRef = collection(db, "posts");

    window.savePost = async (post) => {
      await addDoc(postsRef, { ...post, createdAt: serverTimestamp() });
    };

    window.listenPosts = (onPost) => {
      return onSnapshot(postsRef, (snapshot) => {
        snapshot.docChanges().forEach((change) => {
          if (change.type === "added") {
            onPost({ id: change.doc.id, ...change.doc.data() });
          }
        });
      });
    };
  </script>

  <script src="app.js" defer></script>
  <script
    src="https://maps.googleapis.com/maps/api/js?key=AIzaSyAmaWy-IsFFqQzIlh5dX0H6IHGM5dWLk5A&callback=initMap"
    defer
  ></script>
</body>
</html>


